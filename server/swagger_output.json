{
	"swagger": "2.0",
	"info": {
		"version": "1.0.0",
		"title": "Giant Store Rest API",
		"contact": {
			"email": "zorefbarak@gmail.com"
		},
		"description": "All endpoints available for requests"
	},
	"host": "localhost:3001",
	"basePath": "/",
	"tags": [
		{ "name": "users", "description": "Login / Register / Logout" },
		{ "name": "cart items", "description": "Add, delete, or update cart items" },
		{ "name": "carts", "description": "Add new cart, or get the last cart" },
		{ "name": "categories", "description": "Displaying categories" },
		{ "name": "orders", "description": "Order operations" },
		{ "name": "products", "description": "Products operations" }
	],
	"schemes": ["http"],
	"paths": {
		"/users/login": {
			"post": {
				"tags": ["users"],
				"summary": "Logs the user in",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"userName": { "example": "barak@gmail.com" },
								"password": { "example": "123456" }
							}
						}
					}
				],
				"responses": {
					"200": { "description": "Accepted credentials", "schema": { "$ref": "#/definitions/User" } },
					"600": { 
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
						}
				}
			}
		},
		"/users/is_exist": {
			"post": {
				"tags": ["users"],
				"summary": "Check whether the userName or ID is already registered in the server",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"id": {
									"example": "123456782"
								},
								"userName": {
									"example": "already.taken@gmail.com"
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "Valid request, either in use (true) or OK to use (false)"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/users/": {
			"post": {
				"tags": ["users"],
				"summary": "Register a new user account",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"userName": {
									"example": "email@email.com"
								},
								"id": {
									"type": "string",
									"example": "123456782"
								},
								"password": {
									"example": "123456"
								},
								"firstName": {
									"example": "Peter"
								},
								"lastName": {
									"example": "Parker"
								},
								"city": {
									"example": "Queens, New York"
								},
								"street": {
									"example": "Secret st."
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "User was created successfuly"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/cart_items": {
			"post": {
				"tags": ["cart items"],
				"summary": "Add new cart item",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"productId": {
									"example": 3
								},
								"quantity": {
									"example": 5
								},
								"cartId": {
									"example": 21
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "cart item was added successfuly"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/cart_items/{id}": {
			"delete": {
				"tags": ["cart items"],
				"summary": "Delete cart item",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"type": "integer"
					}
				],
				"responses": {
					"200": {
						"description": "cart item was deleted successfuly from the cart"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			},
			"get": {
				"tags": ["cart items"],
				"summary": "Get all cart items",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"type": "string"
					}
				],
				"responses": {
					"200": {
						"schema": { "type":"array", "items": { "$ref": "#/definitions/cart item"} }
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/cart_items/": {
			"put": {
				"tags": ["cart items"],
				"summary": "update cart item quantity",
				"parameters": [
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"cartItemId": {
									"example": 81
								},
								"quantity": {
									"example": 6
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "cart item quantity was updated successfuly"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/cart_items/by_cart_id/{id}": 
		{
			"delete": {
				"tags": ["cart items"],
				"summary": "Delete all cart items",
				"parameters": [
					{
						"name": "id",
						"in": "path",
						"required": true,
						"type": "integer"
					}
				],
				"responses": {
					"200": {
						"description": "all cart items was deleted succesfully from cart"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/carts": {
			"post": {
				"tags": ["carts"],
				"summary": "Add new cart",
				"parameters": [
					{
						"name": "authorization",
						"in": "header",
						"required": true,
						"type": "string",
						"example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDAwMDAwMCwicm9sZSI6InVzZXIiLCJpYXQiOjE2NTc3OTQyMDl9.wBticOTi8xYDk-YByzV7umhYviq0EKxZNVhS5nSHmv0"
					}
				],
				"responses": {
					"200": {
						"schema": {"$ref": "#/definitions/cart"}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			},
			"get": {
				"tags": ["carts"],
				"summary": "Get last cart",
				"parameters": [
					{
						"name": "authorization",
						"in": "header",
						"required": true,
						"type": "string",
						"example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDAwMDAwMCwicm9sZSI6InVzZXIiLCJpYXQiOjE2NTc3OTQyMDl9.wBticOTi8xYDk-YByzV7umhYviq0EKxZNVhS5nSHmv0"
					}
				],
				"responses": {
					"200": {
						"schema": {"$ref": "#/definitions/cart"}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/categories": {
			"get": {
				"tags": ["categories"],
				"summary": "Get all categories",
				"responses": {
					"200": {
						"schema": { "type":"array", "items": { "$ref": "#/definitions/category"} }
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/orders/amount_of_orders": {
			"get": {
				"tags": ["orders"],
				"summary": "Get amount of orders",
				"responses": {
					"200": {
						"schema": { "type": "object", "properties": {"amountOfOrders": {"example": 10} }}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/orders": {
			"post": {
				"tags": ["orders"],
				"summary": "Add new order",
				"parameters": [
					{
						"name": "authorization",
						"in": "header",
						"required": true,
						"type": "string",
						"example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDAwMDAwMCwicm9sZSI6InVzZXIiLCJpYXQiOjE2NTc3OTQyMDl9.wBticOTi8xYDk-YByzV7umhYviq0EKxZNVhS5nSHmv0"
					},
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
									"cartId":{
										"type": "integer",
										"example": 72
									},
									"finalPrice":{
										"type": "number",
										"example": 100
									},
									"city": {
										"example": "Jerusalem"
									},
									"street": {
										"example": "aluf sade"
									},
									"shippingDate": {
										"example": "2022-06-02T14:02:02.661Z"
									},
									"paymentLastDigits": {
										"example": 1234
									},
									"cartItemsArray":{
										"type": "array", "items": { "$ref": "#/definitions/cart item" }
									}
							}
						}
					}					
				],
				"responses": {
					"200": {
						"description": "order id",
						"schema": {"type": "integer", "example": 50}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			},
			"get": {
				"tags": ["orders"],
				"summary": "Get last order date",
				"parameters": [
					{
						"name": "authorization",
						"in": "header",
						"required": true,
						"type": "string",
						"example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDAwMDAwMCwicm9sZSI6InVzZXIiLCJpYXQiOjE2NTc3OTQyMDl9.wBticOTi8xYDk-YByzV7umhYviq0EKxZNVhS5nSHmv0"
					}
				],
				"responses": {
					"200": {
						"schema": { "type":"date-time", "example": "2022-07-14T13:17:48.000Z"}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/orders/busy_days": {
			"get": {
				"tags": ["orders"],
				"summary": "Get array of dates which have 3 or more shippings",
				"responses": {
					"200": {
						"schema": { "type": "array", "items":{ "properties": {"shippingDate": {"type": "date-time", "example": "2022-08-03T14:36:08.000Z"} }}}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/orders/receipt/{id}": {
			"get": {
				"tags": ["orders"],
				"summary": "Get receipt by cart id",
				"parameters": [
					{
						"name": "authorization",
						"in": "header",
						"required": true,
						"type": "string",
						"example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDAwMDAwMCwicm9sZSI6InVzZXIiLCJpYXQiOjE2NTc3OTQyMDl9.wBticOTi8xYDk-YByzV7umhYviq0EKxZNVhS5nSHmv0"
					},
					{
						"name": "id",
						"in": "path",
						"required": true,
						"type": "integer",
						"example": 72
					}
				],
				"responses": {
					"200": {
						"description": "file was successfully downloaded"
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/products/amount_of_products":{
			"get": {
				"tags": ["products"],
				"summary": "Get amount of products in the store",
				"responses": {
					"200": {
						"schema": { "type": "object", "properties": {"amountOfProducts": {"example": 15} }}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/products":{
			"get": {
				"tags": ["products"],
				"summary": "Get an array of all products in the store",
				"responses": {
					"200": {
						"schema": {"type": "array", "items": { "$ref":"#/definitions/product"}}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			},
			"post": {
				"tags": ["products"],
				"summary": "Add a product to the store",
				"parameters":[
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"name":{
									"type": "string",
									"example": "Milky"
								},
								"categoryId":{
									"type": "integer",
									"example": 1
								},
								"price":{
									"type": "number",
									"example": 32
								},
								"imgUrl":{
									"type": "string",
									"example": "milky.png"
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"schema":{
							"type": "object",
							"properties": {
								"err": { "example": false },
								"msg": { "example": "product was added succesfully" }
							}
						}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			},
			"put": {
				"tags": ["products"],
				"summary": "Edit a specific product in the store",
				"parameters":[
					{
						"name": "body",
						"in": "body",
						"schema": {
							"type": "object",
							"properties": {
								"id": {
									"type": "integer",
									"example": 3
								},
								"name":{
									"type": "string",
									"example": "Cream Cheese"
								},
								"categoryId":{
									"type": "integer",
									"example": 1
								},
								"price":{
									"type": "number",
									"example": 10.9
								},
								"imgUrl":{
									"type": "string",
									"example": "milky.png"
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"schema":{
							"type": "object",
							"properties": {
								"err": { "example": false },
								"msg": { "example": "product was edited succesfully" }
							}
						}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		},
		"/products/{id}": {
			"get": {
				"tags": ["products"],
				"summary": "Get products of specific category",
				"parameters": [
					{
						"name": "authorization",
						"in": "header",
						"required": true,
						"type": "string",
						"example": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDAwMDAwMCwicm9sZSI6InVzZXIiLCJpYXQiOjE2NTc3OTQyMDl9.wBticOTi8xYDk-YByzV7umhYviq0EKxZNVhS5nSHmv0"
					},
					{
						"name": "id",
						"in": "path",
						"required": true,
						"type": "integer",
						"example": 1
					}
				],
				"responses": {
					"200": {
						"schema": {"type": "array", "items": { "$ref":"#/definitions/product"}}
					},
					"600": {
						"description": "Error",
						"schema": { "$ref": "#/definitions/600 Error" }
					}
				}
			}
		}
	},
	"definitions": {
		"cart item": {
			"type": "object",
			"properties": 
			{
				"id": { "type": "integer", "example": "97" },
				"name": { "type": "string","example": "Cream Cheese" },
				"unitPrice": { "type": "number", "example": "105.52" },
				"quantity": { "type": "integer", "example": "2" },
				"imgUrl": { "type": "imgUrl", "example": "cream-cheese.png" },
				"productId": { "type": "integer", "example": "3" },
				"cartId": { "type": "integer", "example": "55" }
			}
		},
		"cart": {
			"type": "object",
			"properties": 
			{
				"id": { "type": "integer", "example": "70" },
				"creationDate": { "type": "date-time","example": "2022-07-14T10:13:23.082Z" },
				"isOpen": { "type": "integer", "enum": [0, 1], "example": "0" }
			}
		},
		"category": {
			"type": "object",
			"properties": 
			{
				"id": { "type": "integer", "example": "1" },
				"name": { "type": "string","example": "Dairy" }
			}
		},
		"product": {
			"type": "object",
			"properties": 
			{
				"id": { "type": "integer", "example": "3" },
				"name": { "type": "string","example": "Cream Cheese" },
				"categoryId": { "type": "integer","example": 1 },
				"price": { "type": "number","example": 9 },
				"imgUrl": { "type": "string","example": "cream-cheese.png" }
			}
		},

		"600 Error": {
			"type": "object",
			"properties": {
				"err": { "example": true },
				"msg": { "example": "Message written in description" }
			}
		}
	}
}
